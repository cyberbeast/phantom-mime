<html>

<head>
  <script src="http://localhost:8080/socket.io/socket.io.js"></script>
  <script type="text/javascript" src="https://rawgithub.com/craftyjs/Crafty/release/dist/crafty-min.js"></script>
  <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
  <script src="../client/assets/js/game.js"></script>
  <script src="../client/assets/js/components.js"></script>
  <script src="../client/assets/js/scenes.js"></script>
  <script src="../client/assets/js/game_grid.js"></script>
  <script>
    console.log('Loading game...');
    var data = 6;

    $(function () {
      var pObject
      console.log("Establishing socket connection now...");
      var socket = io('/game');
      var myIdentity;

      socket.on('yourIdentity', function (data) {
        myIdentity = data
      })

      socket.emit('gameInit', {
        data: "from Game"
      });

      socket.on('gameInitResponse', function (data) {
        console.log(data);
        data.identity = myIdentity
        Game.start(socket, data);
        pObject = Game.create_players();

      })
      $(document).keydown(function (e) {
        console.log(myIdentity, typeof (myIdentity))
        if (myIdentity === pObject.p1.identity) {
          Game.move(pObject.p1, e.keyCode);
        } else {
          Game.move(pObject.p2, e.keyCode);
        }

      });
      socket.on('success', function (data) {
        console.log("REGISTERED with: " + data)
      })
    });
  </script>
</head>

<body>
  <div>
  </div>
</body>

</html>